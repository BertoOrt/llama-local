"use strict";var app=angular.module("app",["ngAnimate","ui.router","ipCookie"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(o,t,n){o.state("home",{url:"/",templateUrl:"partials/home.html",controller:"home"}).state("signup",{url:"/signup",templateUrl:"partials/signup.html",controller:"signup"}).state("search",{url:"/search",templateUrl:"partials/search.html",controller:"search"}).state("error",{url:"/error",templateUrl:"partials/error.html"}).state("user",{url:"/:user",templateUrl:"partials/user.html",controller:"user"}),t.otherwise("/"),n.html5Mode(!0)}]),$(document).ready(function(){window.location.hash&&"#_=_"==window.location.hash&&(window.location.hash=""),$(window).scroll(function(){$(window).scrollTop()>80&&($(".nav").addClass("navbar-fixed"),$(".logo").css("width","35px"),$(".logo").css("height","30px"),$(".nav-tabs").css("padding-top","1%")),$(window).scrollTop()<80&&($(".nav").removeClass("navbar-fixed"),$(".logo").css("width","60px"),$(".logo").css("height","50px"),$(".nav-tabs").css("padding-top","2%"))})}),app.controller("home",["$scope","$http","$location",function(o,t,n){o.modal=function(){$(".ui.basic.modal.home").modal("show")},o.login=function(){o.loginSubmitted=!0;var i={email:o.loginEmail,password:o.loginPassword};t.post("//localhost:3000/login",i).success(function(t,i){o.loginSubmitted=!1,"ok"==t.status?($(".ui.modal").modal("hide all"),n.path("/"+t.id)):o.invalidPassword=!0}).error(function(o){n.path("/error")})}}]),app.controller("signup",["$scope","$http","$location","ipCookie",function(o,t,n,i){o.modal=function(){$(".ui.basic.modal.signup").modal("show")},o.signup=function(){o.submitted=!0;var e=$(".text").text();"Select Country"===e&&(e="United States");var r={email:o.email,country:e,password:o.password};t.post("//localhost:3000/signup",r).success(function(t,e){o.submitted=!1,"ok"==t.status?(i("user",t.id,{encode:function(o){return o}}),n.path("/"+t.id)):o.invalidEmail=!0}).error(function(o){n.path("/error")})},o.login=function(){o.loginSubmitted=!0;var i={email:o.loginEmail,password:o.loginPassword};t.post("//localhost:3000/login",i).success(function(t,i){o.loginSubmitted=!1,"ok"==t.status?($(".ui.modal").modal("hide all"),n.path("/"+t.id)):o.invalidPassword=!0}).error(function(o){n.path("/error")})}}]).directive("myDropdown",[function(){function o(o,t,n){return $(".ui.dropdown").dropdown()}return{link:o}}]),app.controller("search",["$scope",function(o){o.apple="apple"}]),app.controller("user",["$scope","$http","ipCookie","$location",function(o,t,n,i){o.addingReview=!1,o.addingPost=!1,o.isChecked=1,o.user={id:n("user")},t.get("//localhost:3000/info"),o.tab=function(){$(".tabular.menu .item").tab(),$(".ui.accordion").accordion(),$(".ui.dropdown").dropdown()},o.pacTab=function(){$(".menu .item").tab()},o.sidebar=function(){$(".tabular.menu .item").tab(),$(".ui.accordion").accordion(),$(".ui.sidebar").sidebar("toggle")},o.addReviewForm=function(){o.addingReview=!o.addingReview},o.addPostForm=function(){o.addingPost=!o.addingPost},o.submitBioForm=function(){var n=$(".countryDropdown").text();console.log(n),"Select Country"!==n&&(o.user.country=n),o.sendingInfo=!0,t.post("//localhost:3000/user/editInfo",o.user).success(function(t,n){o.sendingInfo=!1,"ok"==t.status?($(".bioTab").click(),$(".message").fadeIn(),setTimeout(function(){$(".message").fadeOut()},3e3),console.log("flash message")):console.log("error")}).error(function(o){i.path("/error")}),console.log("info: ",o.user)}}]).directive("myDropdown",[function(){function o(o,t,n){return $(".ui.dropdown").dropdown()}return{link:o}}]);